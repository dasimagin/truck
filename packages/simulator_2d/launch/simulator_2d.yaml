launch:
- arg: {name: "simulation", default: "$(env TRUCK_SIMULATION)"}
- arg: {name: "control_name", default: "$(env TRUCK_CONTROL)"}
- arg: {name: "qos", default: "0"}

- let: {name: "env", value: "simulator", if: "$(var simulation)"}
- let: {name: "env", value: "truck", unless: "$(var simulation)"}

- include:
    file: $(find-pkg-share truck)/launch/bridge.yaml
    arg:
    - {name: "simulation", value: $(var simulation)}

- include:
    file: $(find-pkg-share truck)/launch/common.yaml
    arg:
    - {name: "simulation", value: "true"}
    - {name: "qos", value: "0"}
    - {name: "control_name", value: "ps4"}

- node:
    pkg: "simulator_2d"
    exec: "simulator_2d_node"
    name: "simulator_2d_node"
    output: "log"
    param:
    - {name: "qos", value: "$(var qos)"}
    # path to truck mode config
    - {name: "model_config", value: "$(find-pkg-share model)/config/model.yaml"}
    # timers period (milliseconds)
    - {name: "update_period", value: 250}
    # simulation step (seconds)
    - {name: "simulation_tick", value: 0.01}
    # visualization marker height
    - {name: "ego/height", value: 0.2}
    # visualization marker color (RGB)
    - {name: "ego_red", value: 0.0}
    - {name: "ego_green", value: 0.0}
    - {name: "ego_blue", value: 1.0}