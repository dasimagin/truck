launch:
- arg: {name: "world", default: "simple.world"}
- arg: {name: "jetson_env", default: "true"}

- executable:
    name: "gzserver"
    cmd: "gzserver --verbose $(find-pkg-share truck_gazebo)/worlds/$(var world) gui:=false"
    output: "log"
    shell: True
    env: 
    - {name: 'GAZEBO_MODEL_PATH', value: "$(find-pkg-share truck_gazebo)/models"}

- let: {name: "library_ld", value: "", unless: "$(var jetson_env)"}
- let: {name: "library_ld", value: "/usr/lib/aarch64-linux-gnu/libgomp.so.1", if: "$(var jetson_env)"}

- executable:
    name: "gzweb"
    cwd: "/opt/gzweb"
    cmd: "npm start"
    output: "log"
    shell: True
    env: 
    - {name: 'LD_PRELOAD', value: "$(var library_ld)"}